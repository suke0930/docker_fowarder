# 概要
dockerコンテナとそれをコントロールするスクリプトにより、ポートフォワードをCUIから行える
ツールです。

### *DockerコンテナそのものがローカルIPを取得する仕組みになっているため、ホストマシンとはIP/ポートを分けて管理できます！！！*<br>
↑これが欲しかったが故に作った（）

### 例
ホストマシン :192.168.0.40
        ssh:22
        http:80<br>
コンテナ    :192.168.0.60
        rule1:8022
LAN内の他マシン　192.168.0.20<br>
この時、``192.168.0.40``に``nmap``すると'22'と'80'が検出されます。<br>
しかし、``192.168.0.60``に`nmap`した場合、'8022'しか検出されません。<br>
脆弱性が無い限り、一台の実マシン/ノードで実質的なFW/Port fowardingが実現できます。

## できること
- ポートフォワ―ティング　エントリ登録
- ポートフォワードィング エントリ削除
- エントリのリスト表示


## 使い方
### 1.  docker-composeをコメントの通りに環境に合わせて変更
```
        ipv4_address: 192.168.0.60   # 重複しないIPアドレスを指定
        parent: enp1s0               # ホストのネットワークインターフェース名を指定
        gateway: 192.168.0.1         # ホストのデフォルトゲートウェイを指定
```
主にこの三箇所になるでしょう。

### 2. ライブラリをインポート・トランスパイル・実行
作業ディレクトリにて以下のコマンドを実行しましょう。
```
npm i --save-dev
npx tsc
node index.js
```
なお、このソフトには現状デーモン化はサポートしていません。
そのため、&をつけてバックグラウンドにするなりscreenやbyobuを使うなりして
デーモン化することをおすすめします。

### 3.エントリの登録、削除、リスト確認
``node testclient.js help``にて確認できます。
基本は対話型ですが、ワンライナーも一応対応させています。
### ~~まだまともにエンドユーザーが使うこと想定してないけどね！~~

# 実行環境
- Docker　　　　　24.0.4 以上
- nodejs　　　 　　19.4.0 以上
- docker-compose　1.29.2 以上
- Linux　　　　　  6.5.0-35 以上

__Win32/64では動作を確認していません！__

## その他
人員募集中！